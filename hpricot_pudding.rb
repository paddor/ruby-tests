require 'rubygems'
require 'hpricot'
require 'rfuzz/session'
include RFuzz
agent = "Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.8.0.4) Firefox/1.5.0.4"
google = HttpClient.new("www.google.com", 80)
r = google.get("/search", :head => {"User-Agent" => agent}, :query => {"q" => ARGV[0], "hl" => "en", "btnG" => "Google Search"})
if r.http_status != "200"
  puts "Wrong Status: #{r.http_status}?"
else
  doc = Hpricot(r.http_body)
  (doc/:a).each do |link|
    if link.attributes["class"] == "l"
      puts link.attributes["href"]
      puts " -- " + link.children.join
    end
  end
end 
